const e=require("chalk"),{NEW_TEXT:r}=require("../i18n"),{NewAnswer:n}=require("../pipe"),s=require("../temp"),{AbsPath:i,IsExist:t,ShowMsg:u,ShowTitle:o,TitleCase:c}=require("../util/setting");module.exports=async function(){if(o("new"),!t("brucerc.js"))return u("red",r.judgeBrucerc);if(!t("package.json"))return u("red",r.judgePackage);if(!t("src"))return u("red",r.judgeSrc);if(!t("node_modules"))return u("red",r.judgeModules);const{frame:d,style:a,useTs:g}=require("../config/bruce"),{dependencies:l,devDependencies:p}=require(i("package.json"));if("default"===d)return u("red",r.judgeFrame);if(g&&!t("tsconfig.json"))return u("red",r.judgeTsconfig);const{NAMEC:f}=await n(),w=new s({compName:f,deps:l,devDeps:p,frame:d,style:a,useTs:g});await w.writeComponent(),console.log(r.name+e.yellowBright(c(f.split("/").pop()))),console.log(r.path+e.yellowBright(f)),u("green",r.newed)};