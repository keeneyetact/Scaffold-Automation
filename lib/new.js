const e=require("chalk"),{frame:r,style:s,useTs:n}=require("../config/bruce"),{NEW_TEXT:i}=require("../i18n"),{NewAnswer:t}=require("../pipe"),o=require("../temp"),{AbsPath:u,IsExist:c,ShowMsg:d,ShowTitle:a,TitleCase:g}=require("../util/setting");module.exports=async function(){if(a("new"),!c("brucerc.js"))return d("red",i.judgeBrucerc);if(!c("package.json"))return d("red",i.judgePackage);if(!c("src"))return d("red",i.judgeSrc);if(!c("node_modules"))return d("red",i.judgeModules);const{dependencies:l,devDependencies:p}=require(u("package.json"));if("default"===r)return d("red",i.judgeFrame);if(n&&!c("tsconfig.json"))return d("red",i.judgeTsconfig);const{NAMEC:f}=await t(),w=new o({compName:f,deps:l,devDeps:p,frame:r,style:s,useTs:n});await w.writeComponent(),console.log(i.name+e.yellowBright(g(f.split("/").pop()))),console.log(i.path+e.yellowBright(f)),d("green",i.newed),process.exit(1)};