const e=require("chalk"),{NEW_TEXT:r}=require("../i18n"),{NewAnswer:s}=require("../pipe"),n=require("../temp"),{AbsPath:i,IsExist:t,ShowMsg:o,ShowTitle:u,TitleCase:c}=require("../util/setting");module.exports=async function(){if(u("new"),!t("brucerc.js"))return o("red",r.judgeBrucerc);if(!t("package.json"))return o("red",r.judgePackage);if(!t("src"))return o("red",r.judgeSrc);if(!t("node_modules"))return o("red",r.judgeModules);const{frame:d,style:a,useTs:g}=require("../config/bruce"),{dependencies:l,devDependencies:p}=require(i("package.json"));if("default"===d)return o("red",r.judgeFrame);if(g&&!t("tsconfig.json"))return o("red",r.judgeTsconfig);const{NAMEC:f}=await s(),w=new n({compName:f,deps:l,devDeps:p,frame:d,style:a,useTs:g});await w.writeComponent(),console.log(r.name+e.yellowBright(c(f.split("/").pop()))),console.log(r.path+e.yellowBright(f)),o("green",r.newed),process.exit(1)};