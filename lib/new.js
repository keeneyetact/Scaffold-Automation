const e=require("chalk"),{NEW_TEXT:r,FormatBool:o}=require("../i18n"),{NewAnswer:s}=require("../pipe"),n=require("../temp"),{AbsPath:i,IsExist:t,ShowMsg:u,ShowTitle:c,TitleCase:d}=require("../util/setting");module.exports=async function(){if(c("new"),!t("brucerc.js"))return u("red",r.judgeBrucerc);if(!t("package.json"))return u("red",r.judgePackage);if(!t("src"))return u("red",r.judgeSrc);if(!t("node_modules"))return u("red",r.judgeModules);const{frame:l,style:a,useTs:g}=require("../config/bruce"),{dependencies:p,devDependencies:f}=require(i("package.json"));if("default"===l)return u("red",r.judgeFrame);if(g&&!t("tsconfig.json"))return u("red",r.judgeTsconfig);const{NAMEC:w,USE_PROPS:m}=await s(),j=new n({compName:w,deps:p,devDeps:f,frame:l,style:a,useProps:m,useTs:g});await j.writeComponent(),console.log(r.name+e.yellowBright(d(w.split("/").pop()))),console.log(r.path+e.yellowBright(w)),console.log(r.prop+e.yellowBright(o(m))),u("green",r.newed)};